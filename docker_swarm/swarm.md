# DOCKER SWARM

<< docker swarm init
<< docker node ls
<< docker swarm join-token worker
Check output generated and then copy to the CLI and generate second node as worker
Execute docker node ls to see nodes attached
<< docker node ls


## Nodes


## Services
< Automatically runs across however many nodes are needed
< High availability is built in 
< Scalability of the app is easy
< Exposing networs and sotorage is easy

Let say that we need to deploy a service in a cluster (3 nodes and 6 replicas)
<< docker service create --name webapp1 --replicas=6 ngnix

Then we could check

<< docker service ls

In a real cluster we should see two nodes running in 
<< docker ps

## Containers 
< Runs on one host
< Must share networks and sotrage per container, when run
< Tough to scale and mahe highly available
## Tasks

## Locking a Swarm cluster

Use encryption to secure logs files
<< docker swarm init --autolock=true

But, when you already have a docker Docker swarm cluster running we need to use:

<< docker swarm update --autolock=true

To unlock a swarm manager after it restars, run 
<< docker swarm unlock

And then provide a ke (generated by the previous commnad)

For example:
In a second node

sudo systemctl restart docker

<< docker node ls
Swarm is encrypted and needs to be unlocked before it can be used.

<< docker swarm unlock 
and paste the key generated

Check
<< docker node ls 


--rotate commnad
Change key


## Quorum
Raft Consensus Algorithm 





















